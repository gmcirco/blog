{
  "hash": "aba5168cbfbf9a016293cb22f2595bb0",
  "result": {
    "markdown": "---\ntitle: \"If You Order Chipotle Online, You Are Probably Getting Less Food\"\nsubtitle: \"Comparing weights of orders\"\nauthor: \"Gio Circo, Ph.D.\"\ndate: 2024-4-03\ncategories:\n  - R\n  - Miscellaneous\nformat: \n    html:\n        self-contained: true\n        code-fold: true\n        mainfont: \"Roboto\"\n        section-divs: true\n        toc: true\n        title-block-banner: true\neditor: visual\ntheme: flatly\nimage: burrito.jpg\n---\n\n\n## How Inconsistent are Chipotle Orders?\n\nHere's a quick one. The question posed here is \"do you get less food if you\norder your Chipotle order online versus in person?\" There are [plenty](https://www.reddit.com/r/Chipotle/comments/cgw24i/less_food_in_bowl_when_you_order_online/) [of](https://www.dailydot.com/irl/chipotle-order-online-less-food-theory/) [posts](https://medium.com/@seangransee/heres-how-much-sweetgreen-shorts-you-when-you-order-online-with-data-c93fb5bc6e26) going back years claiming that their orders are smaller if they order online. \n\nI happened to be watching a video from YouTuber [Zackary Smigel](https://www.youtube.com/@ZackarySmigel) who decided to [eat nothing but\nChipotle for 30 days](https://youtu.be/kZe5k95U-UY?si=Z5VjqGn6hZx9ZIHf). One of \nthe interesting things in his video is that he provided his data for 30\nconsecutive Chipotle visits\n[here](https://docs.google.com/spreadsheets/d/1PluJeBD1aJ36xAKbZ74OHED00ntwhjH81q2wINg5UDw/edit#gid=0). what Zackary might not have known is that he unintentionally created a very nice blocked experiment design. What this means is we can easily identify sources\nof variation in order weight by controlling for other variables present. \n\nI downloaded the data from the Google Sheet, saved a few of the columns locally \nas a .csv and did some minimal processing. \n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nlibrary(tidyverse)\nlibrary(knitr)\nlibrary(kableExtra)\n\n# load the data locally\ndf <- read_csv(\"../../../data/chipotle.csv\") %>%\n  select(-Chips)\n\n# function to convert formatted lbs, oz to grams\nlbs_oz_to_grams <- function(lbs_oz) {\n  parts <- unlist(strsplit(lbs_oz, \"\\\\.\"))\n  pounds_in_grams <- as.numeric(parts[1]) * 453.592\n  ounces_in_grams <- as.numeric(parts[2]) * 28.3495\n  total_grams <- pounds_in_grams + ounces_in_grams\n  return(total_grams)\n}\n\nfood_weight_data <-\n  df %>%\n  pivot_longer(\n    cols = c(\"Burrito\", \"Bowl\"),\n    names_to = \"food\",\n    values_to = \"weight\"\n  ) %>%\n  na.omit()\n\n# convert weight to grams\nfood_weight_data$weight <- sapply(food_weight_data$weight, lbs_oz_to_grams)\n\nhead(food_weight_data[,1:5]) %>% kable(digits = 2, caption = \"Chipotle Food Order Data\")\n```\n\n::: {.cell-output-display}\nTable: Chipotle Food Order Data\n\n|Order  |Meat     |Store   |food    |  weight|\n|:------|:--------|:-------|:-------|-------:|\n|Person |Chicken  |Store 1 |Burrito |  992.23|\n|Person |Chicken  |Store 1 |Burrito |  907.18|\n|Online |Chicken  |Store 1 |Bowl    |  907.18|\n|Online |Carnitas |Store 1 |Burrito |  850.48|\n|Person |Carnitas |Store 1 |Bowl    | 1048.93|\n|Person |Chicken  |Store 1 |Burrito |  850.48|\n:::\n:::\n\n\nSo for every order he made, we can control for whether it was in-person or online,\nthe type of meat used in the order, the store it originated from, and the type of\nfood (either a burrito or a bowl). \n\n## Do you get less food online?\n\nLet's answer this question. To start, we can look at the general distribution of\nweights. Below we see that the median weight of an order is just under 800 grams,\nor about 1.7 pounds. The largest order he got was a whopping 2.3 pounds, and the\nsmallest was 1.1 pounds. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nquantile(food_weight_data$weight)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n       0%       25%       50%       75%      100% \n 510.2910  715.8249  793.7860  907.1840 1048.9315 \n```\n:::\n:::\n\n\nIf we plot out a little histogram we can see the distribution of weights is \n(approximately) normal, with bowls tending to weigh a bit more than burritos.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(food_weight_data) +\n  geom_histogram(aes(x = weight, fill = food), color = 'white', linewidth = 1, bins = 10) +\n  labs(x = \"Weight (grams)\", y = \"Count\") +\n  scale_fill_manual(values = c('#4477AA', '#EE6677')) +\n  theme_bw() +\n  theme(legend.position = c(.1,.9),\n        legend.title = element_blank(),\n        legend.text = element_text(face = \"bold\"))\n```\n\n::: {.cell-output-display}\n![Bowls tend to weigh more than Burritos](youtube-food_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n### Results\n\nTo determine whether online orders weigh less than in-person orders, we can \njust apply some simple statistics. Here, I fit a linear regression with each \nblocking factor. In this way we \"control\" for variables we know affect order\nweight (e.g. bowls weigh more than burritos, or store 3 gives you more food\nthan store 1). In the end all we care about is the coefficient for the \neffect of ordering online relative to ordering in-person.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# in-person ordering yields about 160g more food, or about more 20% on average\nfit1 <- lm(weight ~ Order + Meat + Store + food, data = food_weight_data)\n\nbroom::tidy(fit1) %>%\n  kable(digits = 2, caption = \"Linear regression on order weight\") %>%\n  kable_styling(\"striped\") %>%\n  row_spec(2, bold = T, hline_after = T)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped\" style=\"margin-left: auto; margin-right: auto;\">\n<caption>Linear regression on order weight</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> term </th>\n   <th style=\"text-align:right;\"> estimate </th>\n   <th style=\"text-align:right;\"> std.error </th>\n   <th style=\"text-align:right;\"> statistic </th>\n   <th style=\"text-align:right;\"> p.value </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> (Intercept) </td>\n   <td style=\"text-align:right;\"> 843.22 </td>\n   <td style=\"text-align:right;\"> 36.42 </td>\n   <td style=\"text-align:right;\"> 23.15 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;font-weight: bold;\"> OrderPerson </td>\n   <td style=\"text-align:right;font-weight: bold;\"> 160.62 </td>\n   <td style=\"text-align:right;font-weight: bold;\"> 30.22 </td>\n   <td style=\"text-align:right;font-weight: bold;\"> 5.31 </td>\n   <td style=\"text-align:right;font-weight: bold;\"> 0.00 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> MeatChicken </td>\n   <td style=\"text-align:right;\"> -29.47 </td>\n   <td style=\"text-align:right;\"> 32.48 </td>\n   <td style=\"text-align:right;\"> -0.91 </td>\n   <td style=\"text-align:right;\"> 0.37 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> StoreStore 2 </td>\n   <td style=\"text-align:right;\"> -62.26 </td>\n   <td style=\"text-align:right;\"> 36.74 </td>\n   <td style=\"text-align:right;\"> -1.69 </td>\n   <td style=\"text-align:right;\"> 0.10 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> StoreStore 3 </td>\n   <td style=\"text-align:right;\"> -93.44 </td>\n   <td style=\"text-align:right;\"> 36.74 </td>\n   <td style=\"text-align:right;\"> -2.54 </td>\n   <td style=\"text-align:right;\"> 0.02 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> foodBurrito </td>\n   <td style=\"text-align:right;\"> -82.38 </td>\n   <td style=\"text-align:right;\"> 30.22 </td>\n   <td style=\"text-align:right;\"> -2.73 </td>\n   <td style=\"text-align:right;\"> 0.01 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nSo what does this mean? Well, after controlling for the other variables we see\nthat the effect of ordering in-person relative to online is **160 grams more food** \n(or about 5.6 ounces). Based on the orders he submitted that roughly equates\nto 20% more food from ordering in-person rather than online! \n\nSo, yes, in this case it does appear that ordering online resulted in smaller \norders relative to in-person.\n\n### Caveats\n\nAll of this analysis assumes that the online orders were roughly equivalent to\nthe in-person one (e.g. ordering the same ingredients online as in-person). This\nwould *not* be valid if he tended to order more additional items when in the store\nrather then online. However, from watching the video and looking at the listed \ncost of all items ($11.00) it appears that the orders are comparable.\n\n### Full Model\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(lm(weight ~ Order + Meat + Store + food, data = food_weight_data))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = weight ~ Order + Meat + Store + food, data = food_weight_data)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-147.79  -43.47   -8.17   52.23  129.06 \n\nCoefficients:\n             Estimate Std. Error t value Pr(>|t|)    \n(Intercept)    843.22      36.42  23.154  < 2e-16 ***\nOrderPerson    160.62      30.22   5.314 1.88e-05 ***\nMeatChicken    -29.47      32.48  -0.907   0.3733    \nStoreStore 2   -62.26      36.74  -1.694   0.1031    \nStoreStore 3   -93.44      36.74  -2.543   0.0178 *  \nfoodBurrito    -82.38      30.22  -2.726   0.0118 *  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 81.84 on 24 degrees of freedom\nMultiple R-squared:  0.6358,\tAdjusted R-squared:   0.56 \nF-statistic: 8.381 on 5 and 24 DF,  p-value: 0.0001068\n```\n:::\n:::\n",
    "supporting": [
      "youtube-food_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/kePrint-0.0.1/kePrint.js\"></script>\r\n<link href=\"../../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}